---
trigger: manual
---
# 项目说明
这是一个使用 **pyqt6** 作为前端实现的数据结构可视化项目，采用MVC架构。
- 已经实现的数据结构有：线性表、链表、栈、二叉树、二叉搜索树、哈夫曼树。

# 需求描述
现在需要你为所有数据结构增加使用 **DSL** 控制的功能。遵循下面的每个具体要求：

## DSL语法
1. 关键字：`create`, `insert`, `delete`, `search`, `help`, `alist`, `nlist`, `stck`, `bt`, `bst`, `huff`, `l`, `r`
2. 字面量：`整型`，`字符串`均与**python**中的表达一致
3. 分隔符：`;`分隔命令，`,`分隔参数，`-`和`--`连接参数，一条命令内部不能忽略空格，命令之间可以忽略空格
4. 不支持注释
5. 具体解释：
- `create -alist 1,2,3` 创建一个线性表[1,2,3]
- `insert -alist 4` 在线性表的末尾插入4
- `insert -alist 1 4` 在线性表遍历匹配的第一个1前面插入4
- `delete -alist 1` 删除线性表中遍历匹配的第一个1
- `create -nlist 1,2,3` 创建一个链表[1,2,3]
- `insert -nlist 4` 头插法插入4
- `insert -nlist 1 4` 在链表遍历匹配的第一个1后面插入4
- `delete -nlist 1` 删除链表中遍历匹配的第一个1
- `create -stck 5` 创建一个容量为5的栈
- `create -stck 5 1,2,3` 创建一个栈[1,2,3,None,None]
- `insert -stck 4` 向栈中压入4
- `delete -stck` 弹出栈顶元素
- `create -bt 1,3,6,0 1,0,6,3` 创建一个前、中序序列分别为1，3，6，0和1，0，6，3的二叉树
- `insert -bt 1 --l 4` 在二叉树中由BFS遍历匹配的第一个1的左侧插入4
- `insert -bt 1 --r 4` 在二叉树中由BFS遍历匹配的第一个1的右侧插入4
- `delete -bt 4` 删除二叉树中由BFS遍历匹配的第一个4
- `create -bst 1,2,3` 创建一个由1，2，3构造的二叉搜索树
- `insert -bst 4` 向二叉搜索树中插入4
- `search -bst 1` 在二叉搜索树中查找1
- `delete -bst 1` 删除二叉搜索树中的1
- `create -huff aaaabbbccd` 创建一个由aaaabbbccd构建的哈夫曼树

## 前端效果
在每个数据结构控制面板的`描述`按钮下方增设`命令`按钮。按下按钮，弹出文本输入框。在输入框内输入若干DSL命令后点击确定即可执行。

# 实现要求
- 先阅读项目原有代码，明确前后端以及控制器的功能划分和调用关系。
- DSL解析器放在项目目录的`/utils`目录下
- 尽可能少修改原有代码的逻辑和架构。DSL的执行尽量调用后端原有函数，如果原有函数无法实现功能，再增加函数或修改原有函数。
- 对于引发错误的DSL命令，仿照原有代码的方式在前端提示错误，错误类别在`config.py`中已经定义好，请参考。
